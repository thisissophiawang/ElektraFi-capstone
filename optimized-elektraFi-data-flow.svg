<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 680">
  <!-- Background -->
  <rect width="950" height="680" fill="#f8f9fa" rx="5" ry="5"/>
  
  <!-- Title -->
  <text x="475" y="35" font-family="Arial" font-size="22" font-weight="bold" text-anchor="middle" fill="#333">ElektraFi Frontend-Backend Data Flow</text>
  <text x="475" y="60" font-family="Arial" font-size="16" text-anchor="middle" fill="#666">Task Completion Workflow</text>
  
  <!-- Frontend Box -->
  <rect x="50" y="100" width="280" height="450" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" rx="10" ry="10"/>
  <text x="190" y="125" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#1565c0">Frontend</text>
  
  <!-- Backend Box -->
  <rect x="620" y="100" width="280" height="450" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" rx="10" ry="10"/>
  <text x="760" y="125" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#2e7d32">Backend</text>
  
  <!-- External API Box -->
  <rect x="620" y="560" width="280" height="40" fill="#fff3e0" stroke="#ff9800" stroke-width="2" rx="5" ry="5"/>
  <text x="760" y="585" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#e65100">Flinks API</text>
  
  <!-- Frontend Components -->
  <rect x="75" y="150" width="230" height="40" fill="#bbdefb" stroke="#1e88e5" stroke-width="1" rx="5" ry="5"/>
  <text x="190" y="175" font-family="Arial" font-size="14" text-anchor="middle">User Interface (TasksPage.tsx)</text>
  
  <rect x="75" y="210" width="230" height="40" fill="#bbdefb" stroke="#1e88e5" stroke-width="1" rx="5" ry="5"/>
  <text x="190" y="235" font-family="Arial" font-size="14" text-anchor="middle">GraphQL Mutation (tasks.mutations.ts)</text>
  
  <rect x="75" y="270" width="230" height="40" fill="#bbdefb" stroke="#1e88e5" stroke-width="1" rx="5" ry="5"/>
  <text x="190" y="295" font-family="Arial" font-size="14" text-anchor="middle">Apollo Client</text>
  
  <rect x="75" y="330" width="230" height="40" fill="#bbdefb" stroke="#1e88e5" stroke-width="1" rx="5" ry="5"/>
  <text x="190" y="355" font-family="Arial" font-size="14" text-anchor="middle">Context Provider (taskStreakContext.tsx)</text>
  
  <rect x="75" y="390" width="230" height="40" fill="#bbdefb" stroke="#1e88e5" stroke-width="1" rx="5" ry="5"/>
  <text x="190" y="415" font-family="Arial" font-size="14" text-anchor="middle">Streak Calculator</text>
  
  <rect x="75" y="450" width="230" height="40" fill="#bbdefb" stroke="#1e88e5" stroke-width="1" rx="5" ry="5"/>
  <text x="190" y="475" font-family="Arial" font-size="14" text-anchor="middle">UI State Update</text>
  
  <rect x="75" y="510" width="230" height="40" fill="#bbdefb" stroke="#1e88e5" stroke-width="1" rx="5" ry="5"/>
  <text x="190" y="535" font-family="Arial" font-size="14" text-anchor="middle">Badge Display Component</text>
  
  <!-- Backend Components -->
  <rect x="645" y="150" width="230" height="40" fill="#c8e6c9" stroke="#43a047" stroke-width="1" rx="5" ry="5"/>
  <text x="760" y="175" font-family="Arial" font-size="14" text-anchor="middle">TaskResolver (tasks.resolver.ts)</text>
  
  <rect x="645" y="210" width="230" height="40" fill="#c8e6c9" stroke="#43a047" stroke-width="1" rx="5" ry="5"/>
  <text x="760" y="235" font-family="Arial" font-size="14" text-anchor="middle">TaskService (tasks.service.ts)</text>
  
  <rect x="645" y="270" width="230" height="40" fill="#c8e6c9" stroke="#43a047" stroke-width="1" rx="5" ry="5"/>
  <text x="760" y="295" font-family="Arial" font-size="14" text-anchor="middle">VerificationService</text>
  
  <rect x="645" y="330" width="230" height="40" fill="#c8e6c9" stroke="#43a047" stroke-width="1" rx="5" ry="5"/>
  <text x="760" y="355" font-family="Arial" font-size="14" text-anchor="middle">StreakCalculator</text>
  
  <rect x="645" y="390" width="230" height="40" fill="#c8e6c9" stroke="#43a047" stroke-width="1" rx="5" ry="5"/>
  <text x="760" y="415" font-family="Arial" font-size="14" text-anchor="middle">RewardService</text>
  
  <rect x="645" y="450" width="230" height="40" fill="#c8e6c9" stroke="#43a047" stroke-width="1" rx="5" ry="5"/>
  <text x="760" y="475" font-family="Arial" font-size="14" text-anchor="middle">Database Operations</text>
  
  <!-- Flow Arrows -->
  <!-- Step 1: User -> GraphQL Mutation -->
  <path d="M190 190 L190 210" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
  <circle cx="190" cy="150" r="10" fill="#1976d2"/>
  <text x="190" y="155" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">1</text>
  
  <!-- Step 2: GraphQL Mutation -> Apollo Client -->
  <path d="M190 250 L190 270" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
  <circle cx="190" cy="210" r="10" fill="#1976d2"/>
  <text x="190" y="215" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">2</text>
  
  <!-- Step 3: Apollo Client -> Backend Resolver -->
  <path d="M305 290 L645 170" stroke="#673ab7" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
  <circle cx="305" cy="290" r="10" fill="#673ab7"/>
  <text x="305" y="295" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">3</text>
  <text x="475" y="195" font-family="Arial" font-size="12" fill="#673ab7" text-anchor="middle">CompleteTask Mutation</text>
  
  <!-- Step 4: Resolver -> Service -->
  <path d="M760 190 L760 210" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead)"/>
  <circle cx="760" cy="150" r="10" fill="#388e3c"/>
  <text x="760" y="155" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">4</text>
  
  <!-- Step 5: Service -> Verification -->
  <path d="M760 250 L760 270" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead)"/>
  <circle cx="760" cy="210" r="10" fill="#388e3c"/>
  <text x="760" y="215" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">5</text>
  
  <!-- Step 6: Verification -> Flinks API -->
  <path d="M760 310 L760 560" stroke="#f57c00" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
  <circle cx="760" cy="270" r="10" fill="#f57c00"/>
  <text x="760" y="275" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">6</text>
  <text x="785" y="430" font-family="Arial" font-size="12" fill="#f57c00">API Validation</text>
  
  <!-- Step 7: Verification -> Streak Calculator -->
  <path d="M760 310 L760 330" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead)"/>
  <circle cx="760" cy="330" r="10" fill="#388e3c"/>
  <text x="760" y="335" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">7</text>
  
  <!-- Step 8: Streak Calculator -> Reward -->
  <path d="M760 370 L760 390" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead)"/>
  <circle cx="760" cy="390" r="10" fill="#388e3c"/>
  <text x="760" y="395" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">8</text>
  
  <!-- Step 9: Reward -> Database -->
  <path d="M760 430 L760 450" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead)"/>
  <circle cx="760" cy="450" r="10" fill="#388e3c"/>
  <text x="760" y="455" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">9</text>
  
  <!-- Step 10: Backend -> Apollo Client (Response) -->
  <path d="M645 230 L305 310" stroke="#673ab7" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
  <circle cx="645" cy="230" r="10" fill="#673ab7"/>
  <text x="645" y="235" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">10</text>
  <text x="475" y="290" font-family="Arial" font-size="12" fill="#673ab7" text-anchor="middle">Updated Task Data Response</text>
  
  <!-- Step 11: Apollo -> Context -->
  <path d="M190 310 L190 330" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
  <circle cx="190" cy="270" r="10" fill="#1976d2"/>
  <text x="190" y="275" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">11</text>
  
  <!-- Step 12: Context -> Streak Calculator (Frontend) -->
  <path d="M190 370 L190 390" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
  <circle cx="190" cy="330" r="10" fill="#1976d2"/>
  <text x="190" y="335" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">12</text>
  
  <!-- Step 13: Streak Calculator -> UI Update -->
  <path d="M190 430 L190 450" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
  <circle cx="190" cy="390" r="10" fill="#1976d2"/>
  <text x="190" y="395" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">13</text>
  
  <!-- Step 14: UI Update -> Badge Display -->
  <path d="M190 490 L190 510" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
  <circle cx="190" cy="450" r="10" fill="#1976d2"/>
  <text x="190" y="455" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">14</text>
  
  <!-- Alternative Flow - API Failure -->
  <path d="M720 310 L720 390" stroke="#e53935" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="2,2"/>
  <text x="615" y="340" font-family="Arial" font-size="11" fill="#e53935" text-anchor="end">API Failure</text>
  <text x="615" y="355" font-family="Arial" font-size="11" fill="#e53935" text-anchor="end">Fallback Verification</text>
  
  <!-- Cross-communication between frontend and backend streak calculators -->
  <path d="M305 410 L645 350" stroke="#9c27b0" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>
  <text x="475" y="360" font-family="Arial" font-size="12" fill="#9c27b0" text-anchor="middle">Sync Streak Calculation Logic</text>
  
  <!-- Badge Achievement Flow -->
  <path d="M645 430 L305 530" stroke="#9c27b0" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>
  <text x="475" y="470" font-family="Arial" font-size="12" fill="#9c27b0" text-anchor="middle">Badge Achievement Notification</text>
  
  <!-- Markers and Definitions -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <rect x="50" y="620" width="850" height="40" fill="#ffffff" stroke="#333333" stroke-width="1" rx="5" ry="5"/>
  <circle cx="80" cy="640" r="7" fill="#1976d2"/>
  <text x="95" y="644" font-family="Arial" font-size="14">Frontend Flow</text>
  <circle cx="220" cy="640" r="7" fill="#388e3c"/>
  <text x="235" y="644" font-family="Arial" font-size="14">Backend Flow</text>
  <line x1="340" y1="640" x2="370" y2="640" stroke="#673ab7" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="385" y="644" font-family="Arial" font-size="14">Network Request</text>
  <line x1="530" y1="640" x2="560" y2="640" stroke="#9c27b0" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="575" y="644" font-family="Arial" font-size="14">Data Synchronization</text>
  <line x1="740" y1="640" x2="770" y2="640" stroke="#e53935" stroke-width="2" stroke-dasharray="2,2"/>
  <text x="785" y="644" font-family="Arial" font-size="14">Fallback Flow</text>
</svg>
